{"version":3,"file":"index.umd.js","sources":["../src/modules/useCustomEventsModule.tsx","../src/modules/useFullscreenModule.tsx","../src/utils.ts","../src/modules/useThumbsModule.tsx","../src/useSpringCarousel.tsx","../src/useTransitionCarousel.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react'\nimport { Subject } from 'rxjs'\nimport {\n  EventsObservableProps,\n  ObservableCallbackFn,\n  EmitObservableFn,\n} from '../types'\n\nexport function useCustomEventsModule() {\n  const eventsObserverRef = useRef(\n    new Subject<EventsObservableProps>(),\n  )\n\n  function useListenToCustomEvent(fn: ObservableCallbackFn) {\n    useEffect(() => {\n      const subscribe = eventsObserverRef.current.subscribe(fn)\n      return () => subscribe.unsubscribe()\n    }, [fn])\n  }\n\n  const emitObservable: EmitObservableFn = data => {\n    eventsObserverRef.current.next(data)\n  }\n\n  return {\n    useListenToCustomEvent,\n    emitObservable,\n  }\n}\n","import { useRef, MutableRefObject, useEffect } from 'react'\nimport screenfull from 'screenfull'\nimport { EmitObservableFn } from '../types'\n\ntype FullscreenModule = {\n  mainCarouselWrapperRef: MutableRefObject<HTMLDivElement | null>\n  emitObservable: EmitObservableFn\n  handleResize?(): void\n}\n\nexport function useFullscreenModule({\n  mainCarouselWrapperRef,\n  emitObservable,\n  handleResize,\n}: FullscreenModule) {\n  const isFullscreen = useRef(false)\n\n  useEffect(() => {\n    function handleFullscreenChange() {\n      if (document.fullscreenElement) {\n        setIsFullscreen(true)\n        emitObservable({\n          eventName: 'onFullscreenChange',\n          isFullscreen: true,\n        })\n\n        handleResize && handleResize()\n      }\n\n      if (!document.fullscreenElement) {\n        setIsFullscreen(false)\n        emitObservable({\n          eventName: 'onFullscreenChange',\n          isFullscreen: false,\n        })\n        handleResize && handleResize()\n      }\n    }\n\n    if (screenfull.isEnabled) {\n      screenfull.on('change', handleFullscreenChange)\n\n      return () => {\n        if (screenfull.isEnabled) {\n          screenfull.off('change', handleFullscreenChange)\n        }\n      }\n    }\n  })\n\n  function setIsFullscreen(_isFullscreen: boolean) {\n    isFullscreen.current = _isFullscreen\n  }\n\n  function getIsFullscreen() {\n    return isFullscreen.current\n  }\n\n  function enterFullscreen(elementRef?: HTMLElement) {\n    if (screenfull.isEnabled) {\n      screenfull.request(\n        (elementRef || mainCarouselWrapperRef.current) as Element,\n      )\n    }\n  }\n\n  function exitFullscreen() {\n    screenfull.isEnabled && screenfull.exit()\n  }\n\n  return {\n    enterFullscreen,\n    exitFullscreen,\n    getIsFullscreen,\n  }\n}\n","import { useRef, useEffect } from 'react'\n\ntype Callback = () => void | (() => void)\n\nexport function useMount(callback: Callback) {\n  const isMounted = useRef(false)\n\n  useEffect(() => {\n    if (!isMounted.current) {\n      const clean = callback()\n      isMounted.current = true\n\n      return () => {\n        clean && clean()\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport function getIsBrowser() {\n  return typeof window !== 'undefined'\n}\n","import { useRef } from 'react'\nimport { useSpring, SpringConfig, animated } from 'react-spring'\nimport {\n  UseSpringCarouselProps,\n  ReactSpringCarouselItem,\n  ReactSpringThumbItem,\n  PrepareThumbsData,\n} from '../types'\nimport { useMount } from '../utils'\n\ntype OffsetDimension = 'offsetWidth' | 'offsetHeight'\ntype OffsetDirection = 'offsetLeft' | 'offsetTop'\ntype ScrollDirection = 'scrollLeft' | 'scrollTop'\n\ntype Props = {\n  items: ReactSpringCarouselItem[]\n  withThumbs: boolean\n  thumbsSlideAxis: UseSpringCarouselProps['thumbsSlideAxis']\n  thumbsWrapperRef?: UseSpringCarouselProps['thumbsWrapperRef']\n  springConfig: SpringConfig\n  prepareThumbsData?: PrepareThumbsData\n}\n\nexport function useThumbsModule({\n  items,\n  withThumbs,\n  thumbsSlideAxis = 'x',\n  springConfig,\n  thumbsWrapperRef,\n  prepareThumbsData,\n}: Props) {\n  const internalThumbsWrapperRef = useRef<HTMLDivElement | null>(null)\n  const [thumbListStyles, setThumbListStyles] = useSpring(() => ({\n    [thumbsSlideAxis]: 0,\n    config: springConfig,\n  }))\n\n  useMount(() => {\n    if (withThumbs) {\n      const missingThumbs = items.some(item => !item.renderThumb)\n\n      if (missingThumbs) {\n        throw new Error(\n          'The renderThumb property is missing in one or more items. You need to add the renderThumb property to every item of the carousel when the prop withThumbs={true} or eventually set withThumbs={false}.',\n        )\n      }\n    }\n  })\n\n  function handleThumbsScroll(activeItem: number) {\n    function getOffsetDirection() {\n      return thumbsSlideAxis === 'x' ? 'offsetLeft' : 'offsetTop'\n    }\n    function getOffsetDimension() {\n      return thumbsSlideAxis === 'x' ? 'offsetWidth' : 'offsetHeight'\n    }\n\n    function getScrollDirecton() {\n      return thumbsSlideAxis === 'x' ? 'scrollLeft' : 'scrollTop'\n    }\n    function getThumbNode() {\n      return internalThumbsWrapperRef.current!.querySelector(\n        `#thumb-${items[activeItem].id}`,\n      ) as HTMLElement\n    }\n    function getThumbOffsetPosition({\n      thumbNode,\n      offsetDirection,\n      offsetDimension,\n    }: {\n      thumbNode: HTMLElement\n      offsetDirection: OffsetDirection\n      offsetDimension: OffsetDimension\n    }) {\n      return (\n        thumbNode[offsetDirection] + thumbNode[offsetDimension] / 2\n      )\n    }\n    function getThumbScrollDimension({\n      thumbWrapper,\n      offsetDimension,\n    }: {\n      thumbWrapper: HTMLDivElement\n      offsetDimension: OffsetDimension\n    }) {\n      return thumbWrapper[offsetDimension] / 2\n    }\n    function getScrollFromValue({\n      thumbWrapper,\n      scrollDirection,\n    }: {\n      thumbWrapper: HTMLDivElement\n      scrollDirection: ScrollDirection\n    }) {\n      return thumbWrapper[scrollDirection]\n    }\n    function getScrollToValue({\n      thumbWrapper,\n      thumbOffsetPosition,\n      thumbScrollDimension,\n      offsetDimension,\n    }: {\n      thumbWrapper: HTMLDivElement\n      thumbOffsetPosition: number\n      thumbScrollDimension: number\n      offsetDimension: OffsetDimension\n    }) {\n      const scrollDimensionProperty =\n        thumbsSlideAxis === 'x' ? 'scrollWidth' : 'scrollHeight'\n\n      if (\n        activeItem === items.length - 1 ||\n        thumbOffsetPosition - thumbScrollDimension >\n          thumbWrapper[scrollDimensionProperty] -\n            thumbWrapper[offsetDimension]\n      ) {\n        return (\n          thumbWrapper[scrollDimensionProperty] -\n          thumbWrapper[offsetDimension]\n        )\n      }\n\n      if (activeItem === 0) {\n        return 0\n      }\n\n      return thumbOffsetPosition - thumbScrollDimension\n    }\n\n    if (thumbsWrapperRef && thumbsWrapperRef.current) {\n      internalThumbsWrapperRef.current = thumbsWrapperRef.current\n    }\n\n    const thumbNode = getThumbNode()\n\n    if (thumbNode) {\n      const thumbWrapper = internalThumbsWrapperRef.current!\n      const offsetDirection = getOffsetDirection()\n      const offsetDimension = getOffsetDimension()\n      const scrollDirection = getScrollDirecton()\n      const thumbOffsetPosition = getThumbOffsetPosition({\n        thumbNode,\n        offsetDimension,\n        offsetDirection,\n      })\n      const thumbScrollDimension = getThumbScrollDimension({\n        thumbWrapper,\n        offsetDimension,\n      })\n\n      setThumbListStyles.start({\n        from: {\n          [thumbsSlideAxis]: getScrollFromValue({\n            thumbWrapper,\n            scrollDirection,\n          }),\n        },\n        to: {\n          [thumbsSlideAxis]: getScrollToValue({\n            thumbWrapper,\n            thumbOffsetPosition,\n            thumbScrollDimension,\n            offsetDimension,\n          }),\n        },\n        onChange: val => {\n          if (thumbsSlideAxis === 'x') {\n            // @ts-ignore\n            internalThumbsWrapperRef!.current!.scrollLeft = val.x\n          } else {\n            // @ts-ignore\n            internalThumbsWrapperRef!.current!.scrollTop = val.y\n          }\n        },\n      })\n    }\n  }\n\n  function handlePrepareThumbsDate() {\n    function getPreparedItems(\n      _items: ReactSpringCarouselItem[],\n    ): ReactSpringThumbItem[] {\n      return _items.map(i => ({\n        id: i.id,\n        renderThumb: i.renderThumb,\n      }))\n    }\n\n    if (prepareThumbsData) {\n      return prepareThumbsData(getPreparedItems(items))\n    }\n\n    return getPreparedItems(items)\n  }\n\n  function getScrollDirectionSpringValue() {\n    if (thumbsSlideAxis === 'x') {\n      return {\n        // @ts-ignore\n        scrollLeft: thumbListStyles.x,\n      }\n    }\n\n    return {\n      // @ts-ignore\n      scrollTop: thumbListStyles.y,\n    }\n  }\n\n  const thumbsFragment = withThumbs ? (\n    <animated.div\n      ref={internalThumbsWrapperRef}\n      {...getScrollDirectionSpringValue()}\n      style={{\n        display: 'flex',\n        flex: 1,\n        position: 'relative',\n        flexDirection: thumbsSlideAxis === 'x' ? 'row' : 'column',\n        ...(thumbsSlideAxis === 'x'\n          ? { overflowX: 'auto' }\n          : {\n              overflowY: 'auto',\n              maxHeight: '100%',\n            }),\n      }}\n    >\n      {handlePrepareThumbsDate().map(({ id, renderThumb }) => {\n        const thumbId = `thumb-${id}`\n\n        return (\n          <div key={thumbId} id={thumbId}>\n            {renderThumb}\n          </div>\n        )\n      })}\n    </animated.div>\n  ) : null\n\n  return {\n    thumbsFragment,\n    handleThumbsScroll,\n  }\n}\n","import {\n  useRef,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n} from 'react'\nimport {\n  useSpring,\n  config,\n  animated,\n  AnimationResult,\n} from 'react-spring'\nimport { useDrag } from 'react-use-gesture'\nimport {\n  useCustomEventsModule,\n  useFullscreenModule,\n  useThumbsModule,\n} from './modules'\nimport {\n  UseSpringCarouselProps,\n  UseSpringCarouselContextProps,\n  SlideToItemFnProps,\n  SlideActionType,\n} from './types'\nimport { useMount } from './utils'\nimport { getIsBrowser } from './utils'\n\nconst UseSpringCarouselContext = createContext<\n  UseSpringCarouselContextProps | undefined\n>(undefined)\n\nexport function useSpringCarouselContext() {\n  const context = useContext(UseSpringCarouselContext)\n\n  if (!context) {\n    throw new Error(`useSpringCarouselContext isn't being used within the useSringCarousel context; \n    use the context only inside a component that is rendered within the Carousel.`)\n  }\n\n  return context\n}\n\nexport default function useSpringCarousel({\n  items,\n  withLoop = false,\n  draggingSlideTreshold = 100,\n  springConfig = config.default,\n  shouldResizeOnWindowResize = true,\n  withThumbs = false,\n  enableThumbsWrapperScroll = true,\n  carouselSlideAxis = 'x',\n  thumbsSlideAxis = 'x',\n  thumbsWrapperRef,\n  prepareThumbsData,\n  itemsPerSlide = 1,\n  initialActiveItem = 0,\n  initialStartingPosition = 'start',\n  disableGestures = false,\n  gutter = 0,\n  adjacentItemsPx = 0,\n}: UseSpringCarouselProps) {\n  function getItems() {\n    if (withLoop) {\n      return [...items, ...items, ...items]\n    }\n\n    return items\n  }\n  const slideActionType = useRef<SlideActionType>('next')\n  const internalItems = getItems()\n  const activeItem = useRef(initialActiveItem)\n  const mainCarouselWrapperRef = useRef<HTMLDivElement | null>(null)\n  const carouselTrackWrapperRef = useRef<HTMLDivElement | null>(null)\n  const isDragging = useRef(false)\n  const isAnimating = useRef(false)\n  const windowIsHidden = useRef(false)\n\n  function getCarouselItem() {\n    if (carouselTrackWrapperRef.current) {\n      return carouselTrackWrapperRef.current.querySelector(\n        '.use-spring-carousel-item',\n      )\n    }\n\n    return null\n  }\n\n  const [carouselStyles, setCarouselStyles] = useSpring(() => ({\n    y: 0,\n    x: 0,\n    config: springConfig,\n  }))\n  const getSlideValue = useCallback(() => {\n    if (!carouselTrackWrapperRef.current) {\n      return 0\n    }\n    const carouselItem = getCarouselItem()\n\n    if (!carouselItem) {\n      throw Error('No carousel items available!')\n    }\n\n    if (carouselSlideAxis === 'x') {\n      return carouselItem.getBoundingClientRect().width + gutter\n    }\n\n    return carouselItem.getBoundingClientRect().height + gutter\n  }, [carouselSlideAxis, gutter])\n  const adjustCarouselWrapperPosition = useCallback(\n    (ref: HTMLDivElement) => {\n      const positionProperty =\n        carouselSlideAxis === 'x' ? 'left' : 'top'\n\n      function getDefaultPositionValue() {\n        return getSlideValue() * items.length\n      }\n      function setPosition(v: number) {\n        ref.style.top = '0px'\n        ref.style.left = '0px'\n        ref.style[positionProperty] = `-${v - adjacentItemsPx}px`\n      }\n      function setStartPosition() {\n        setPosition(getDefaultPositionValue())\n      }\n      function setCenterPosition() {\n        setPosition(\n          getDefaultPositionValue() -\n            getSlideValue() * Math.round((itemsPerSlide - 1) / 2),\n        )\n      }\n      function setEndPosition() {\n        setPosition(\n          getDefaultPositionValue() -\n            getSlideValue() * Math.round(itemsPerSlide - 1),\n        )\n      }\n\n      if (itemsPerSlide > 1) {\n        switch (initialStartingPosition) {\n          default:\n          case 'start': {\n            setStartPosition()\n            break\n          }\n          case 'center': {\n            setCenterPosition()\n            break\n          }\n          case 'end': {\n            setEndPosition()\n            break\n          }\n        }\n      } else {\n        setStartPosition()\n      }\n    },\n    [\n      carouselSlideAxis,\n      getSlideValue,\n      initialStartingPosition,\n      items.length,\n      itemsPerSlide,\n      adjacentItemsPx,\n    ],\n  )\n  const handleResize = useCallback(() => {\n    setCarouselStyles.start({\n      immediate: true,\n      x: 0,\n      y: 0,\n    })\n    setCarouselStyles.start({\n      immediate: true,\n      [carouselSlideAxis]: -(\n        getSlideValue() * getCurrentActiveItem()\n      ),\n    })\n\n    if (withLoop) {\n      adjustCarouselWrapperPosition(carouselTrackWrapperRef.current!)\n    }\n  }, [\n    adjustCarouselWrapperPosition,\n    carouselSlideAxis,\n    getSlideValue,\n    setCarouselStyles,\n    withLoop,\n  ])\n\n  // Custom modules\n  const {\n    useListenToCustomEvent,\n    emitObservable,\n  } = useCustomEventsModule()\n  const {\n    enterFullscreen,\n    exitFullscreen,\n    getIsFullscreen,\n  } = useFullscreenModule({\n    mainCarouselWrapperRef,\n    emitObservable,\n    handleResize,\n  })\n  const {\n    thumbsFragment: _thumbsFragment,\n    handleThumbsScroll,\n  } = useThumbsModule({\n    withThumbs,\n    items,\n    thumbsSlideAxis,\n    springConfig,\n    thumbsWrapperRef,\n    prepareThumbsData,\n  })\n  const bindDrag = useDrag(\n    props => {\n      const isDragging = props.dragging\n      const movement =\n        props.movement[carouselSlideAxis === 'x' ? 0 : 1]\n\n      const currentSlidedValue = -(\n        getSlideValue() * getCurrentActiveItem()\n      )\n\n      function resetAnimation() {\n        setCarouselStyles.start({\n          [carouselSlideAxis]: currentSlidedValue,\n        })\n      }\n\n      if (isDragging) {\n        setCarouselStyles.start({\n          [carouselSlideAxis]: currentSlidedValue + movement,\n        })\n        setIsDragging(true)\n        emitObservable({\n          eventName: 'onDrag',\n          ...props,\n        })\n\n        const prevItemTreshold = movement > draggingSlideTreshold\n        const nextItemTreshold = movement < -draggingSlideTreshold\n\n        if (nextItemTreshold) {\n          if (!withLoop && getIsLastItem()) {\n            resetAnimation()\n          } else {\n            slideToNextItem()\n          }\n          props.cancel()\n        } else if (prevItemTreshold) {\n          if (!withLoop && getIsFirstItem()) {\n            resetAnimation()\n          } else {\n            slideToPrevItem()\n          }\n          props.cancel()\n        }\n      }\n\n      if (props.last) {\n        resetAnimation()\n      }\n    },\n    {\n      enabled: !disableGestures,\n    },\n  )\n  // Perform some check on first mount\n  useMount(() => {\n    if (!Number.isInteger(itemsPerSlide)) {\n      throw new Error(`itemsPerSlide should be an integer.`)\n    }\n\n    if (itemsPerSlide > items.length) {\n      throw new Error(\n        `The itemsPerSlide prop can't be greater than the total length of the items you provide.`,\n      )\n    }\n\n    if (itemsPerSlide < 1) {\n      throw new Error(`The itemsPerSlide prop can't be less than 1.`)\n    }\n\n    if (!shouldResizeOnWindowResize) {\n      console.warn(\n        'You set shouldResizeOnWindowResize={false}; be aware that the carousel could behave in a strange way if you also use the fullscreen functionality or if you change the mobile orientation.',\n      )\n    }\n\n    if (initialActiveItem < 0) {\n      console.warn('The initialActiveItem cannot be less than 0.')\n    }\n\n    if (initialActiveItem > items.length) {\n      console.warn(\n        'The initialActiveItem cannot be greater than the total length of the items you provide.',\n      )\n    }\n  })\n  useMount(() => {\n    function handleVisibilityChange() {\n      if (document.hidden) {\n        windowIsHidden.current = true\n      } else {\n        windowIsHidden.current = false\n      }\n    }\n\n    if (getIsBrowser()) {\n      document.addEventListener(\n        'visibilitychange',\n        handleVisibilityChange,\n      )\n\n      return () => {\n        document.removeEventListener(\n          'visibilitychange',\n          handleVisibilityChange,\n        )\n      }\n    }\n  })\n  useEffect(() => {\n    if (shouldResizeOnWindowResize) {\n      window.addEventListener('resize', handleResize)\n      return () => {\n        window.removeEventListener('resize', handleResize)\n      }\n    }\n  }, [handleResize, shouldResizeOnWindowResize])\n  useEffect(() => {\n    if (carouselTrackWrapperRef.current) {\n      if (carouselSlideAxis === 'x') {\n        carouselTrackWrapperRef.current.style.top = '0px'\n      }\n      if (carouselSlideAxis === 'y') {\n        carouselTrackWrapperRef.current.style.left = '0px'\n      }\n    }\n  }, [carouselSlideAxis])\n  useMount(() => {\n    if (initialActiveItem > 0 && initialActiveItem <= items.length) {\n      slideToItem({\n        to: initialActiveItem,\n        immediate: true,\n      })\n      setActiveItem(initialActiveItem)\n    }\n  })\n\n  function setSlideActionType(type: SlideActionType) {\n    slideActionType.current = type\n  }\n  function getSlideActionType() {\n    return slideActionType.current\n  }\n  function setActiveItem(newItem: number) {\n    activeItem.current = newItem\n  }\n  function getCurrentActiveItem() {\n    return activeItem.current\n  }\n  function getIsAnimating() {\n    return isAnimating.current\n  }\n  function setIsAnimating(val: boolean) {\n    isAnimating.current = val\n  }\n  function setIsDragging(val: boolean) {\n    isDragging.current = val\n  }\n  function getIsDragging() {\n    return isDragging.current\n  }\n  function getPrevItem() {\n    const currentActiveItem = getCurrentActiveItem()\n\n    if (currentActiveItem === 0) {\n      return items.length - 1\n    }\n\n    return currentActiveItem - 1\n  }\n  function getNextItem() {\n    const currentActiveItem = getCurrentActiveItem()\n\n    if (currentActiveItem === items.length - 1) {\n      return 0\n    }\n\n    return currentActiveItem + 1\n  }\n  function getIsNextItem(id: string) {\n    const itemIndex = findItemIndex(id)\n    const activeItem = getCurrentActiveItem()\n\n    if (withLoop && activeItem === items.length - 1) {\n      return itemIndex === 0\n    }\n\n    return itemIndex === activeItem + 1\n  }\n  function getIsPrevItem(id: string) {\n    const itemIndex = findItemIndex(id)\n    const activeItem = getCurrentActiveItem()\n\n    if (withLoop && activeItem === 0) {\n      return itemIndex === items.length - 1\n    }\n\n    return itemIndex === activeItem - 1\n  }\n  function findItemIndex(id: string) {\n    return items.findIndex(item => item.id === id)\n  }\n  function slideToItem({\n    from,\n    to,\n    immediate = false,\n    onRest = () => {},\n  }: SlideToItemFnProps) {\n    if (!immediate) {\n      setActiveItem(to)\n      setIsAnimating(true)\n      emitObservable({\n        eventName: 'onSlideStartChange',\n        nextItem: to,\n        slideActionType: getSlideActionType(),\n      })\n    }\n\n    function getFromValue() {\n      if (from) {\n        return {\n          from: {\n            [carouselSlideAxis]: from,\n          },\n        }\n      }\n\n      return {}\n    }\n\n    setCarouselStyles.start({\n      ...getFromValue(),\n      to: {\n        [carouselSlideAxis]: -(getSlideValue() * to),\n      },\n      immediate,\n      onRest: (val: AnimationResult) => {\n        if (val.finished) {\n          setIsDragging(false)\n          setIsAnimating(false)\n          onRest()\n\n          if (!immediate) {\n            emitObservable({\n              eventName: 'onSlideChange',\n              currentItem: getCurrentActiveItem(),\n              slideActionType: getSlideActionType(),\n            })\n          }\n        }\n      },\n    })\n\n    if (enableThumbsWrapperScroll && withThumbs && !immediate) {\n      handleThumbsScroll(to)\n    }\n  }\n  function getWrapperFromValue(element: HTMLDivElement) {\n    if (element.style.transform === 'none') {\n      return 0\n    }\n\n    const values = element.style.transform.split(/\\w+\\(|\\);?/)\n    return Number(\n      values[1]\n        .split(/,\\s?/g)\n        [carouselSlideAxis === 'x' ? 0 : 1].replace('px', ''),\n    )\n  }\n  function getIsFirstItem() {\n    return getCurrentActiveItem() === 0\n  }\n  function getIsLastItem() {\n    return getCurrentActiveItem() === items.length - 1\n  }\n  function slideToPrevItem() {\n    if (\n      (!withLoop && getCurrentActiveItem() === 0) ||\n      windowIsHidden.current\n    ) {\n      return\n    }\n\n    setSlideActionType('prev')\n    if (getIsFirstItem()) {\n      slideToItem({\n        from: -(\n          Math.abs(\n            getWrapperFromValue(carouselTrackWrapperRef.current!),\n          ) +\n          getSlideValue() * items.length\n        ),\n        to: items.length - 1,\n      })\n    } else {\n      slideToItem({\n        to: getPrevItem(),\n      })\n    }\n  }\n  function slideToNextItem() {\n    if (\n      (!withLoop &&\n        getCurrentActiveItem() === internalItems.length - 1) ||\n      windowIsHidden.current\n    ) {\n      return\n    }\n\n    setSlideActionType('next')\n    if (getIsLastItem()) {\n      slideToItem({\n        from:\n          getWrapperFromValue(carouselTrackWrapperRef.current!) +\n          getSlideValue() * items.length,\n        to: 0,\n      })\n    } else {\n      slideToItem({\n        to: getNextItem(),\n      })\n    }\n  }\n  function _slideToItem(item: string | number) {\n    let itemIndex = 0\n\n    if (typeof item === 'string') {\n      itemIndex = items.findIndex(_item => _item.id === item)\n    } else {\n      itemIndex = item\n    }\n\n    if (itemIndex >= items.length) {\n      throw Error(\n        `The item you want to slide to doesn't exist. This could be due to the fact that \n        you provide a wrong id or a higher numeric index.`,\n      )\n    }\n\n    if (itemIndex === getCurrentActiveItem()) {\n      return\n    }\n\n    const currentItem = findItemIndex(\n      items[getCurrentActiveItem()].id,\n    )\n    const newActiveItem = findItemIndex(items[itemIndex].id)\n\n    if (newActiveItem > currentItem) {\n      setSlideActionType('next')\n    } else {\n      setSlideActionType('prev')\n    }\n\n    slideToItem({\n      to: itemIndex,\n    })\n  }\n  const contextProps: UseSpringCarouselContextProps = {\n    useListenToCustomEvent,\n    getIsFullscreen,\n    enterFullscreen,\n    exitFullscreen,\n    getIsAnimating,\n    getIsDragging,\n    getIsNextItem,\n    getIsPrevItem,\n    slideToPrevItem,\n    slideToNextItem,\n    slideToItem: _slideToItem,\n    getIsActiveItem: id => {\n      return findItemIndex(id) === getCurrentActiveItem()\n    },\n    getCurrentActiveItem: () => ({\n      id: items[getCurrentActiveItem()].id,\n      index: getCurrentActiveItem(),\n    }),\n  }\n  function getItemWidthValue() {\n    return `repeat(${internalItems.length}, calc(calc(100% - ${\n      gutter * (itemsPerSlide - 1)\n    }px) / ${itemsPerSlide}))`\n  }\n  function getPercentageValue() {\n    return `calc(100% - ${adjacentItemsPx * 2}px)`\n  }\n\n  const carouselFragment = (\n    <UseSpringCarouselContext.Provider value={contextProps}>\n      <div\n        ref={mainCarouselWrapperRef}\n        data-testid=\"use-spring-carousel-wrapper\"\n        style={{\n          display: 'flex',\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          overflow: 'hidden',\n        }}\n      >\n        <animated.div\n          {...bindDrag()}\n          data-testid=\"use-spring-carousel-animated-wrapper\"\n          style={{\n            display: 'grid',\n            gridGap: `${gutter}px`,\n            [carouselSlideAxis === 'x'\n              ? 'gridTemplateColumns'\n              : 'gridTemplateRows']: getItemWidthValue(),\n            top: 0,\n            left: 0,\n            width:\n              carouselSlideAxis === 'x'\n                ? getPercentageValue()\n                : '100%',\n            height:\n              carouselSlideAxis === 'y'\n                ? getPercentageValue()\n                : '100%',\n            position: 'relative',\n            ...carouselStyles,\n          }}\n          ref={ref => {\n            if (ref) {\n              carouselTrackWrapperRef.current = ref\n\n              if (withLoop) {\n                adjustCarouselWrapperPosition(ref)\n              }\n            }\n          }}\n        >\n          {internalItems.map(({ id, renderItem }, index) => {\n            return (\n              <div\n                key={`${id}-${index}`}\n                className=\"use-spring-carousel-item\"\n                data-testid=\"use-spring-carousel-item-wrapper\"\n                style={{\n                  display: 'flex',\n                  position: 'relative',\n                }}\n              >\n                {renderItem}\n              </div>\n            )\n          })}\n        </animated.div>\n      </div>\n    </UseSpringCarouselContext.Provider>\n  )\n  const thumbsFragment = (\n    <UseSpringCarouselContext.Provider value={contextProps}>\n      {_thumbsFragment}\n    </UseSpringCarouselContext.Provider>\n  )\n\n  return {\n    carouselFragment,\n    thumbsFragment,\n    ...contextProps,\n  }\n}\n","import { createContext, useRef, useState, useContext } from 'react'\nimport { useTransition, animated, config } from 'react-spring'\nimport { useDrag } from 'react-use-gesture'\nimport {\n  useCustomEventsModule,\n  useThumbsModule,\n  useFullscreenModule,\n} from './modules'\nimport {\n  UseTransitionCarouselContextProps,\n  UseTransitionCarouselProps,\n  SlideActionType,\n} from './types'\n\nconst UseTransitionCarouselContext = createContext<\n  UseTransitionCarouselContextProps | undefined\n>(undefined)\n\nexport function useTransitionCarouselContext() {\n  const context = useContext(UseTransitionCarouselContext)\n\n  if (!context) {\n    throw new Error(`useTransitionCarouselContext isn't being used within the useTransitionCarousel context; \n    use the context only inside a component that is rendered within the Carousel.`)\n  }\n\n  return context\n}\n\nexport default function useTransitionCarousel({\n  items,\n  withLoop = false,\n  withThumbs = false,\n  springConfig = config.default,\n  thumbsSlideAxis = 'x',\n  enableThumbsWrapperScroll = true,\n  draggingSlideTreshold = 50,\n  prepareThumbsData,\n  toPrevItemSpringProps,\n  toNextItemSpringProps,\n  disableGestures = false,\n  springAnimationProps = {\n    initial: {\n      opacity: 1,\n      position: 'relative',\n    },\n    from: {\n      opacity: 0,\n      position: 'absolute',\n    },\n    enter: {\n      opacity: 1,\n      position: 'relative',\n    },\n    leave: {\n      opacity: 0,\n      position: 'absolute',\n    },\n  },\n}: UseTransitionCarouselProps) {\n  const slideActionType = useRef<SlideActionType>('next')\n  const mainCarouselWrapperRef = useRef<HTMLDivElement | null>(null)\n  const isAnimating = useRef(false)\n  const [activeItem, setActiveItem] = useState(0)\n\n  const {\n    emitObservable,\n    useListenToCustomEvent,\n  } = useCustomEventsModule()\n  const {\n    enterFullscreen,\n    exitFullscreen,\n    getIsFullscreen,\n  } = useFullscreenModule({\n    emitObservable,\n    mainCarouselWrapperRef,\n  })\n  const {\n    thumbsFragment: _thumbsFragment,\n    handleThumbsScroll,\n  } = useThumbsModule({\n    items,\n    withThumbs,\n    thumbsSlideAxis,\n    springConfig,\n    prepareThumbsData,\n  })\n\n  const bindSwipe = useDrag(\n    ({ last, movement: [mx] }) => {\n      if (getIsAnimating()) {\n        return\n      }\n\n      if (last) {\n        const prevItemTreshold = mx > draggingSlideTreshold\n        const nextItemTreshold = mx < -draggingSlideTreshold\n        const isFirstItem = activeItem === 0\n        const isLastItem = activeItem === items.length - 1\n\n        if (nextItemTreshold) {\n          if (!withLoop && isLastItem) {\n            return\n          }\n\n          slideToNextItem()\n          emitObservable({\n            eventName: 'onLeftSwipe',\n          })\n        } else if (prevItemTreshold) {\n          if (!withLoop && isFirstItem) {\n            return\n          }\n\n          slideToPrevItem()\n          emitObservable({\n            eventName: 'onRightSwipe',\n          })\n        }\n      }\n    },\n    {\n      enabled: !disableGestures,\n    },\n  )\n\n  function getTransitionConfig() {\n    const slideActionType = getSlideActionType()\n\n    if (slideActionType === 'prev' && toPrevItemSpringProps) {\n      return {\n        initial: {\n          ...springAnimationProps.initial,\n        },\n        from: {\n          ...toPrevItemSpringProps.from,\n        },\n        enter: {\n          ...toPrevItemSpringProps.enter,\n        },\n        leave: {\n          ...toPrevItemSpringProps.leave,\n        },\n      }\n    }\n\n    if (slideActionType === 'next' && toNextItemSpringProps) {\n      return {\n        initial: {\n          ...springAnimationProps.initial,\n        },\n        from: {\n          ...toNextItemSpringProps.from,\n        },\n        enter: {\n          ...toNextItemSpringProps.enter,\n        },\n        leave: {\n          ...toNextItemSpringProps.leave,\n        },\n      }\n    }\n\n    return {\n      initial: {\n        ...springAnimationProps.initial,\n      },\n      from: {\n        ...springAnimationProps.from,\n      },\n      enter: {\n        ...springAnimationProps.enter,\n      },\n      leave: {\n        ...springAnimationProps.leave,\n      },\n    }\n  }\n\n  const transitions = useTransition(activeItem, {\n    config: springConfig,\n    ...getTransitionConfig(),\n    onStart: () => setIsAnimating(true),\n    keys: null,\n    onRest: val => {\n      if (val.finished) {\n        setIsAnimating(false)\n        emitObservable({\n          eventName: 'onSlideChange',\n          currentItem: activeItem,\n          slideActionType: getSlideActionType(),\n        })\n      }\n    },\n  })\n  const itemsFragment = transitions((styles, item) => (\n    <animated.div\n      style={{\n        ...styles,\n        flex: '1 0 100%',\n        width: '100%',\n        height: '100%',\n      }}\n    >\n      {items[item].renderItem}\n    </animated.div>\n  ))\n\n  function getIsAnimating() {\n    return isAnimating.current\n  }\n  function setIsAnimating(val: boolean) {\n    isAnimating.current = val\n  }\n  function setSlideActionType(type: SlideActionType) {\n    slideActionType.current = type\n  }\n  function getSlideActionType() {\n    return slideActionType.current\n  }\n  function slideToItem(item: string | number) {\n    let itemIndex = 0\n\n    if (typeof item === 'string') {\n      itemIndex = items.findIndex(_item => _item.id === item)\n    } else {\n      itemIndex = item\n    }\n\n    if (itemIndex >= items.length) {\n      throw Error(\n        `The item you want to slide to doesn't exist. This could be due to the fact that \n        you provide a wrong id or a higher numeric index.`,\n      )\n    }\n\n    if (itemIndex === activeItem) {\n      return\n    }\n\n    const currentItem = findItemIndex(items[activeItem].id)\n    const newActiveItem = findItemIndex(items[itemIndex].id)\n\n    emitObservable({\n      eventName: 'onSlideStartChange',\n      nextItem: newActiveItem,\n      slideActionType: getSlideActionType(),\n    })\n\n    if (newActiveItem > currentItem) {\n      setSlideActionType('next')\n    } else {\n      setSlideActionType('prev')\n    }\n\n    setActiveItem(itemIndex)\n\n    if (enableThumbsWrapperScroll && withThumbs) {\n      handleThumbsScroll(itemIndex)\n    }\n  }\n  function slideToNextItem() {\n    const isLastItem = activeItem === items.length - 1\n\n    if (withLoop) {\n      setSlideActionType('next')\n      if (isLastItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: 0,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(0)\n      } else {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem + 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(activeItem + 1)\n      }\n    } else {\n      if (!isLastItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem + 1,\n          slideActionType: getSlideActionType(),\n        })\n        setSlideActionType('next')\n        setActiveItem(activeItem + 1)\n      }\n    }\n  }\n  function slideToPrevItem() {\n    const isFirstItem = activeItem === 0\n\n    if (withLoop) {\n      setSlideActionType('prev')\n      if (isFirstItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: items.length - 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(items.length - 1)\n      } else {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem - 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(activeItem - 1)\n      }\n    } else {\n      if (!isFirstItem) {\n        setSlideActionType('prev')\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem - 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(activeItem - 1)\n      }\n    }\n  }\n  function findItemIndex(id: string) {\n    return items.findIndex(item => item.id === id)\n  }\n  function getIsNextItem(id: string) {\n    const itemIndex = findItemIndex(id)\n\n    if (withLoop && activeItem === items.length - 1) {\n      return itemIndex === 0\n    }\n\n    return itemIndex === activeItem + 1\n  }\n  function getIsPrevItem(id: string) {\n    const itemIndex = findItemIndex(id)\n\n    if (withLoop && activeItem === 0) {\n      return itemIndex === items.length - 1\n    }\n\n    return itemIndex === activeItem - 1\n  }\n\n  const contextProps: UseTransitionCarouselContextProps = {\n    activeItem,\n    slideToItem,\n    slideToNextItem,\n    slideToPrevItem,\n    enterFullscreen,\n    exitFullscreen,\n    useListenToCustomEvent,\n    getIsNextItem,\n    getIsPrevItem,\n    getIsAnimating,\n    getIsFullscreen,\n    getIsActiveItem: id => {\n      return findItemIndex(id) === activeItem\n    },\n    getCurrentActiveItem: () => ({\n      id: items[activeItem].id,\n      index: activeItem,\n    }),\n  }\n\n  const carouselFragment = (\n    <UseTransitionCarouselContext.Provider value={contextProps}>\n      <div\n        ref={mainCarouselWrapperRef}\n        {...bindSwipe()}\n        style={{\n          display: 'flex',\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          overflow: 'hidden',\n        }}\n      >\n        {itemsFragment}\n      </div>\n    </UseTransitionCarouselContext.Provider>\n  )\n\n  const thumbsFragment = (\n    <UseTransitionCarouselContext.Provider value={contextProps}>\n      {_thumbsFragment}\n    </UseTransitionCarouselContext.Provider>\n  )\n\n  return {\n    carouselFragment,\n    thumbsFragment,\n    ...contextProps,\n  }\n}\n"],"names":["useRef","Subject","useEffect","screenfull","useSpring","_jsx","animated","createContext","useContext","config","useCallback","useDrag","useState","useTransition"],"mappings":"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"}