{"version":3,"file":"index.es.js","sources":["../src/modules/useCustomEventsModule.tsx","../src/modules/useFullscreenModule.tsx","../src/utils.ts","../src/modules/useThumbsModule.tsx","../src/useSpringCarousel.tsx","../src/useTransitionCarousel.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react'\nimport { Subject } from 'rxjs'\nimport {\n  EventsObservableProps,\n  ObservableCallbackFn,\n  EmitObservableFn,\n} from '../types'\n\nexport function useCustomEventsModule() {\n  const eventsObserverRef = useRef(\n    new Subject<EventsObservableProps>(),\n  )\n\n  function useListenToCustomEvent(fn: ObservableCallbackFn) {\n    useEffect(() => {\n      const subscribe = eventsObserverRef.current.subscribe(fn)\n      return () => subscribe.unsubscribe()\n    }, [fn])\n  }\n\n  const emitObservable: EmitObservableFn = data => {\n    eventsObserverRef.current.next(data)\n  }\n\n  return {\n    useListenToCustomEvent,\n    emitObservable,\n  }\n}\n","import { useRef, MutableRefObject, useEffect } from 'react'\nimport screenfull from 'screenfull'\nimport { EmitObservableFn } from '../types'\n\ntype FullscreenModule = {\n  mainCarouselWrapperRef: MutableRefObject<HTMLDivElement | null>\n  emitObservable: EmitObservableFn\n  handleResize?(): void\n}\n\nexport function useFullscreenModule({\n  mainCarouselWrapperRef,\n  emitObservable,\n  handleResize,\n}: FullscreenModule) {\n  const isFullscreen = useRef(false)\n\n  useEffect(() => {\n    function handleFullscreenChange() {\n      if (document.fullscreenElement) {\n        setIsFullscreen(true)\n        emitObservable({\n          eventName: 'onFullscreenChange',\n          isFullscreen: true,\n        })\n\n        handleResize && handleResize()\n      }\n\n      if (!document.fullscreenElement) {\n        setIsFullscreen(false)\n        emitObservable({\n          eventName: 'onFullscreenChange',\n          isFullscreen: false,\n        })\n        handleResize && handleResize()\n      }\n    }\n\n    if (screenfull.isEnabled) {\n      screenfull.on('change', handleFullscreenChange)\n\n      return () => {\n        if (screenfull.isEnabled) {\n          screenfull.off('change', handleFullscreenChange)\n        }\n      }\n    }\n  })\n\n  function setIsFullscreen(_isFullscreen: boolean) {\n    isFullscreen.current = _isFullscreen\n  }\n\n  function getIsFullscreen() {\n    return isFullscreen.current\n  }\n\n  function enterFullscreen(elementRef?: HTMLElement) {\n    if (screenfull.isEnabled) {\n      screenfull.request(\n        (elementRef || mainCarouselWrapperRef.current) as Element,\n      )\n    }\n  }\n\n  function exitFullscreen() {\n    screenfull.isEnabled && screenfull.exit()\n  }\n\n  return {\n    enterFullscreen,\n    exitFullscreen,\n    getIsFullscreen,\n  }\n}\n","import { useRef, useEffect } from 'react'\n\ntype Callback = () => void | (() => void)\n\nexport function useMount(callback: Callback) {\n  const isMounted = useRef(false)\n\n  useEffect(() => {\n    if (!isMounted.current) {\n      const clean = callback()\n      isMounted.current = true\n\n      return () => {\n        clean && clean()\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport function getIsBrowser() {\n  return typeof window !== 'undefined'\n}\n","import { useRef } from 'react'\nimport { useSpring, SpringConfig, animated } from 'react-spring'\nimport {\n  UseSpringCarouselProps,\n  ReactSpringCarouselItem,\n  ReactSpringThumbItem,\n  PrepareThumbsData,\n} from '../types'\nimport { useMount } from '../utils'\n\ntype OffsetDimension = 'offsetWidth' | 'offsetHeight'\ntype OffsetDirection = 'offsetLeft' | 'offsetTop'\ntype ScrollDirection = 'scrollLeft' | 'scrollTop'\n\ntype Props = {\n  items: ReactSpringCarouselItem[]\n  withThumbs: boolean\n  thumbsSlideAxis: UseSpringCarouselProps['thumbsSlideAxis']\n  thumbsWrapperRef?: UseSpringCarouselProps['thumbsWrapperRef']\n  springConfig: SpringConfig\n  prepareThumbsData?: PrepareThumbsData\n}\n\nexport function useThumbsModule({\n  items,\n  withThumbs,\n  thumbsSlideAxis = 'x',\n  springConfig,\n  thumbsWrapperRef,\n  prepareThumbsData,\n}: Props) {\n  const internalThumbsWrapperRef = useRef<HTMLDivElement | null>(null)\n  const [thumbListStyles, setThumbListStyles] = useSpring(() => ({\n    [thumbsSlideAxis]: 0,\n    config: springConfig,\n  }))\n\n  useMount(() => {\n    if (withThumbs) {\n      const missingThumbs = items.some(item => !item.renderThumb)\n\n      if (missingThumbs) {\n        throw new Error(\n          'The renderThumb property is missing in one or more items. You need to add the renderThumb property to every item of the carousel when the prop withThumbs={true} or eventually set withThumbs={false}.',\n        )\n      }\n    }\n  })\n\n  function handleThumbsScroll(activeItem: number) {\n    function getOffsetDirection() {\n      return thumbsSlideAxis === 'x' ? 'offsetLeft' : 'offsetTop'\n    }\n    function getOffsetDimension() {\n      return thumbsSlideAxis === 'x' ? 'offsetWidth' : 'offsetHeight'\n    }\n\n    function getScrollDirecton() {\n      return thumbsSlideAxis === 'x' ? 'scrollLeft' : 'scrollTop'\n    }\n    function getThumbNode() {\n      return internalThumbsWrapperRef.current!.querySelector(\n        `#thumb-${items[activeItem].id}`,\n      ) as HTMLElement\n    }\n    function getThumbOffsetPosition({\n      thumbNode,\n      offsetDirection,\n      offsetDimension,\n    }: {\n      thumbNode: HTMLElement\n      offsetDirection: OffsetDirection\n      offsetDimension: OffsetDimension\n    }) {\n      return (\n        thumbNode[offsetDirection] + thumbNode[offsetDimension] / 2\n      )\n    }\n    function getThumbScrollDimension({\n      thumbWrapper,\n      offsetDimension,\n    }: {\n      thumbWrapper: HTMLDivElement\n      offsetDimension: OffsetDimension\n    }) {\n      return thumbWrapper[offsetDimension] / 2\n    }\n    function getScrollFromValue({\n      thumbWrapper,\n      scrollDirection,\n    }: {\n      thumbWrapper: HTMLDivElement\n      scrollDirection: ScrollDirection\n    }) {\n      return thumbWrapper[scrollDirection]\n    }\n    function getScrollToValue({\n      thumbWrapper,\n      thumbOffsetPosition,\n      thumbScrollDimension,\n      offsetDimension,\n    }: {\n      thumbWrapper: HTMLDivElement\n      thumbOffsetPosition: number\n      thumbScrollDimension: number\n      offsetDimension: OffsetDimension\n    }) {\n      const scrollDimensionProperty =\n        thumbsSlideAxis === 'x' ? 'scrollWidth' : 'scrollHeight'\n\n      if (\n        activeItem === items.length - 1 ||\n        thumbOffsetPosition - thumbScrollDimension >\n          thumbWrapper[scrollDimensionProperty] -\n            thumbWrapper[offsetDimension]\n      ) {\n        return (\n          thumbWrapper[scrollDimensionProperty] -\n          thumbWrapper[offsetDimension]\n        )\n      }\n\n      if (activeItem === 0) {\n        return 0\n      }\n\n      return thumbOffsetPosition - thumbScrollDimension\n    }\n\n    if (thumbsWrapperRef && thumbsWrapperRef.current) {\n      internalThumbsWrapperRef.current = thumbsWrapperRef.current\n    }\n\n    const thumbNode = getThumbNode()\n\n    if (thumbNode) {\n      const thumbWrapper = internalThumbsWrapperRef.current!\n      const offsetDirection = getOffsetDirection()\n      const offsetDimension = getOffsetDimension()\n      const scrollDirection = getScrollDirecton()\n      const thumbOffsetPosition = getThumbOffsetPosition({\n        thumbNode,\n        offsetDimension,\n        offsetDirection,\n      })\n      const thumbScrollDimension = getThumbScrollDimension({\n        thumbWrapper,\n        offsetDimension,\n      })\n\n      setThumbListStyles.start({\n        from: {\n          [thumbsSlideAxis]: getScrollFromValue({\n            thumbWrapper,\n            scrollDirection,\n          }),\n        },\n        to: {\n          [thumbsSlideAxis]: getScrollToValue({\n            thumbWrapper,\n            thumbOffsetPosition,\n            thumbScrollDimension,\n            offsetDimension,\n          }),\n        },\n        onChange: val => {\n          if (thumbsSlideAxis === 'x') {\n            // @ts-ignore\n            internalThumbsWrapperRef!.current!.scrollLeft = val.x\n          } else {\n            // @ts-ignore\n            internalThumbsWrapperRef!.current!.scrollTop = val.y\n          }\n        },\n      })\n    }\n  }\n\n  function handlePrepareThumbsDate() {\n    function getPreparedItems(\n      _items: ReactSpringCarouselItem[],\n    ): ReactSpringThumbItem[] {\n      return _items.map(i => ({\n        id: i.id,\n        renderThumb: i.renderThumb,\n      }))\n    }\n\n    if (prepareThumbsData) {\n      return prepareThumbsData(getPreparedItems(items))\n    }\n\n    return getPreparedItems(items)\n  }\n\n  function getScrollDirectionSpringValue() {\n    if (thumbsSlideAxis === 'x') {\n      return {\n        // @ts-ignore\n        scrollLeft: thumbListStyles.x,\n      }\n    }\n\n    return {\n      // @ts-ignore\n      scrollTop: thumbListStyles.y,\n    }\n  }\n\n  const thumbsFragment = withThumbs ? (\n    <animated.div\n      ref={internalThumbsWrapperRef}\n      {...getScrollDirectionSpringValue()}\n      style={{\n        display: 'flex',\n        flex: 1,\n        position: 'relative',\n        flexDirection: thumbsSlideAxis === 'x' ? 'row' : 'column',\n        ...(thumbsSlideAxis === 'x'\n          ? { overflowX: 'auto' }\n          : {\n              overflowY: 'auto',\n              maxHeight: '100%',\n            }),\n      }}\n    >\n      {handlePrepareThumbsDate().map(({ id, renderThumb }) => {\n        const thumbId = `thumb-${id}`\n\n        return (\n          <div key={thumbId} id={thumbId}>\n            {renderThumb}\n          </div>\n        )\n      })}\n    </animated.div>\n  ) : null\n\n  return {\n    thumbsFragment,\n    handleThumbsScroll,\n  }\n}\n","import {\n  useRef,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n} from 'react'\nimport {\n  useSpring,\n  config,\n  animated,\n  AnimationResult,\n} from 'react-spring'\nimport { useDrag } from 'react-use-gesture'\nimport {\n  useCustomEventsModule,\n  useFullscreenModule,\n  useThumbsModule,\n} from './modules'\nimport {\n  UseSpringCarouselProps,\n  UseSpringCarouselContextProps,\n  SlideToItemFnProps,\n  SlideActionType,\n} from './types'\nimport { useMount } from './utils'\nimport { getIsBrowser } from './utils'\n\nconst UseSpringCarouselContext = createContext<\n  UseSpringCarouselContextProps | undefined\n>(undefined)\n\nexport function useSpringCarouselContext() {\n  const context = useContext(UseSpringCarouselContext)\n\n  if (!context) {\n    throw new Error(`useSpringCarouselContext isn't being used within the useSringCarousel context; \n    use the context only inside a component that is rendered within the Carousel.`)\n  }\n\n  return context\n}\n\nexport default function useSpringCarousel({\n  items,\n  withLoop = false,\n  draggingSlideTreshold = 100,\n  springConfig = config.default,\n  shouldResizeOnWindowResize = true,\n  withThumbs = false,\n  enableThumbsWrapperScroll = true,\n  carouselSlideAxis = 'x',\n  thumbsSlideAxis = 'x',\n  thumbsWrapperRef,\n  prepareThumbsData,\n  itemsPerSlide = 1,\n  initialActiveItem = 0,\n  initialStartingPosition = 'start',\n  disableGestures = false,\n  gutter = 0,\n  adjacentItemsPx = 0,\n}: UseSpringCarouselProps) {\n  function getItems() {\n    if (withLoop) {\n      return [...items, ...items, ...items]\n    }\n\n    return items\n  }\n  const slideActionType = useRef<SlideActionType>('next')\n  const internalItems = getItems()\n  const activeItem = useRef(initialActiveItem)\n  const mainCarouselWrapperRef = useRef<HTMLDivElement | null>(null)\n  const carouselTrackWrapperRef = useRef<HTMLDivElement | null>(null)\n  const isDragging = useRef(false)\n  const isAnimating = useRef(false)\n  const windowIsHidden = useRef(false)\n\n  function getCarouselItem() {\n    if (carouselTrackWrapperRef.current) {\n      return carouselTrackWrapperRef.current.querySelector(\n        '.use-spring-carousel-item',\n      )\n    }\n\n    return null\n  }\n\n  const [carouselStyles, setCarouselStyles] = useSpring(() => ({\n    y: 0,\n    x: 0,\n    config: springConfig,\n  }))\n  const getSlideValue = useCallback(() => {\n    if (!carouselTrackWrapperRef.current) {\n      return 0\n    }\n    const carouselItem = getCarouselItem()\n\n    if (!carouselItem) {\n      throw Error('No carousel items available!')\n    }\n\n    if (carouselSlideAxis === 'x') {\n      return carouselItem.getBoundingClientRect().width + gutter\n    }\n\n    return carouselItem.getBoundingClientRect().height + gutter\n  }, [carouselSlideAxis, gutter])\n  const adjustCarouselWrapperPosition = useCallback(\n    (ref: HTMLDivElement) => {\n      const positionProperty =\n        carouselSlideAxis === 'x' ? 'left' : 'top'\n\n      function getDefaultPositionValue() {\n        return getSlideValue() * items.length\n      }\n      function setPosition(v: number) {\n        ref.style.top = '0px'\n        ref.style.left = '0px'\n        ref.style[positionProperty] = `-${v - adjacentItemsPx}px`\n      }\n      function setStartPosition() {\n        setPosition(getDefaultPositionValue())\n      }\n      function setCenterPosition() {\n        setPosition(\n          getDefaultPositionValue() -\n            getSlideValue() * Math.round((itemsPerSlide - 1) / 2),\n        )\n      }\n      function setEndPosition() {\n        setPosition(\n          getDefaultPositionValue() -\n            getSlideValue() * Math.round(itemsPerSlide - 1),\n        )\n      }\n\n      if (itemsPerSlide > 1) {\n        switch (initialStartingPosition) {\n          default:\n          case 'start': {\n            setStartPosition()\n            break\n          }\n          case 'center': {\n            setCenterPosition()\n            break\n          }\n          case 'end': {\n            setEndPosition()\n            break\n          }\n        }\n      } else {\n        setStartPosition()\n      }\n    },\n    [\n      carouselSlideAxis,\n      getSlideValue,\n      initialStartingPosition,\n      items.length,\n      itemsPerSlide,\n      adjacentItemsPx,\n    ],\n  )\n  const handleResize = useCallback(() => {\n    setCarouselStyles.start({\n      immediate: true,\n      x: 0,\n      y: 0,\n    })\n    setCarouselStyles.start({\n      immediate: true,\n      [carouselSlideAxis]: -(\n        getSlideValue() * getCurrentActiveItem()\n      ),\n    })\n\n    if (withLoop) {\n      adjustCarouselWrapperPosition(carouselTrackWrapperRef.current!)\n    }\n  }, [\n    adjustCarouselWrapperPosition,\n    carouselSlideAxis,\n    getSlideValue,\n    setCarouselStyles,\n    withLoop,\n  ])\n\n  // Custom modules\n  const {\n    useListenToCustomEvent,\n    emitObservable,\n  } = useCustomEventsModule()\n  const {\n    enterFullscreen,\n    exitFullscreen,\n    getIsFullscreen,\n  } = useFullscreenModule({\n    mainCarouselWrapperRef,\n    emitObservable,\n    handleResize,\n  })\n  const {\n    thumbsFragment: _thumbsFragment,\n    handleThumbsScroll,\n  } = useThumbsModule({\n    withThumbs,\n    items,\n    thumbsSlideAxis,\n    springConfig,\n    thumbsWrapperRef,\n    prepareThumbsData,\n  })\n  const bindDrag = useDrag(\n    props => {\n      const isDragging = props.dragging\n      const movement =\n        props.movement[carouselSlideAxis === 'x' ? 0 : 1]\n\n      const currentSlidedValue = -(\n        getSlideValue() * getCurrentActiveItem()\n      )\n\n      function resetAnimation() {\n        setCarouselStyles.start({\n          [carouselSlideAxis]: currentSlidedValue,\n        })\n      }\n\n      if (isDragging) {\n        setCarouselStyles.start({\n          [carouselSlideAxis]: currentSlidedValue + movement,\n        })\n        setIsDragging(true)\n        emitObservable({\n          eventName: 'onDrag',\n          ...props,\n        })\n\n        const prevItemTreshold = movement > draggingSlideTreshold\n        const nextItemTreshold = movement < -draggingSlideTreshold\n\n        if (nextItemTreshold) {\n          if (!withLoop && getIsLastItem()) {\n            resetAnimation()\n          } else {\n            slideToNextItem()\n          }\n          props.cancel()\n        } else if (prevItemTreshold) {\n          if (!withLoop && getIsFirstItem()) {\n            resetAnimation()\n          } else {\n            slideToPrevItem()\n          }\n          props.cancel()\n        }\n      }\n\n      if (props.last) {\n        resetAnimation()\n      }\n    },\n    {\n      enabled: !disableGestures,\n    },\n  )\n  // Perform some check on first mount\n  useMount(() => {\n    if (!Number.isInteger(itemsPerSlide)) {\n      throw new Error(`itemsPerSlide should be an integer.`)\n    }\n\n    if (itemsPerSlide > items.length) {\n      throw new Error(\n        `The itemsPerSlide prop can't be greater than the total length of the items you provide.`,\n      )\n    }\n\n    if (itemsPerSlide < 1) {\n      throw new Error(`The itemsPerSlide prop can't be less than 1.`)\n    }\n\n    if (!shouldResizeOnWindowResize) {\n      console.warn(\n        'You set shouldResizeOnWindowResize={false}; be aware that the carousel could behave in a strange way if you also use the fullscreen functionality or if you change the mobile orientation.',\n      )\n    }\n\n    if (initialActiveItem < 0) {\n      console.warn('The initialActiveItem cannot be less than 0.')\n    }\n\n    if (initialActiveItem > items.length) {\n      console.warn(\n        'The initialActiveItem cannot be greater than the total length of the items you provide.',\n      )\n    }\n  })\n  useMount(() => {\n    function handleVisibilityChange() {\n      if (document.hidden) {\n        windowIsHidden.current = true\n      } else {\n        windowIsHidden.current = false\n      }\n    }\n\n    if (getIsBrowser()) {\n      document.addEventListener(\n        'visibilitychange',\n        handleVisibilityChange,\n      )\n\n      return () => {\n        document.removeEventListener(\n          'visibilitychange',\n          handleVisibilityChange,\n        )\n      }\n    }\n  })\n  useEffect(() => {\n    if (shouldResizeOnWindowResize) {\n      window.addEventListener('resize', handleResize)\n      return () => {\n        window.removeEventListener('resize', handleResize)\n      }\n    }\n  }, [handleResize, shouldResizeOnWindowResize])\n  useEffect(() => {\n    if (carouselTrackWrapperRef.current) {\n      if (carouselSlideAxis === 'x') {\n        carouselTrackWrapperRef.current.style.top = '0px'\n      }\n      if (carouselSlideAxis === 'y') {\n        carouselTrackWrapperRef.current.style.left = '0px'\n      }\n    }\n  }, [carouselSlideAxis])\n  useMount(() => {\n    if (initialActiveItem > 0 && initialActiveItem <= items.length) {\n      slideToItem({\n        to: initialActiveItem,\n        immediate: true,\n      })\n      setActiveItem(initialActiveItem)\n    }\n  })\n\n  function setSlideActionType(type: SlideActionType) {\n    slideActionType.current = type\n  }\n  function getSlideActionType() {\n    return slideActionType.current\n  }\n  function setActiveItem(newItem: number) {\n    activeItem.current = newItem\n  }\n  function getCurrentActiveItem() {\n    return activeItem.current\n  }\n  function getIsAnimating() {\n    return isAnimating.current\n  }\n  function setIsAnimating(val: boolean) {\n    isAnimating.current = val\n  }\n  function setIsDragging(val: boolean) {\n    isDragging.current = val\n  }\n  function getIsDragging() {\n    return isDragging.current\n  }\n  function getPrevItem() {\n    const currentActiveItem = getCurrentActiveItem()\n\n    if (currentActiveItem === 0) {\n      return items.length - 1\n    }\n\n    return currentActiveItem - 1\n  }\n  function getNextItem() {\n    const currentActiveItem = getCurrentActiveItem()\n\n    if (currentActiveItem === items.length - 1) {\n      return 0\n    }\n\n    return currentActiveItem + 1\n  }\n  function getIsNextItem(id: string) {\n    const itemIndex = findItemIndex(id)\n    const activeItem = getCurrentActiveItem()\n\n    if (withLoop && activeItem === items.length - 1) {\n      return itemIndex === 0\n    }\n\n    return itemIndex === activeItem + 1\n  }\n  function getIsPrevItem(id: string) {\n    const itemIndex = findItemIndex(id)\n    const activeItem = getCurrentActiveItem()\n\n    if (withLoop && activeItem === 0) {\n      return itemIndex === items.length - 1\n    }\n\n    return itemIndex === activeItem - 1\n  }\n  function findItemIndex(id: string) {\n    return items.findIndex(item => item.id === id)\n  }\n  function slideToItem({\n    from,\n    to,\n    immediate = false,\n    onRest = () => {},\n  }: SlideToItemFnProps) {\n    if (!immediate) {\n      setActiveItem(to)\n      setIsAnimating(true)\n      emitObservable({\n        eventName: 'onSlideStartChange',\n        nextItem: to,\n        slideActionType: getSlideActionType(),\n      })\n    }\n\n    function getFromValue() {\n      if (from) {\n        return {\n          from: {\n            [carouselSlideAxis]: from,\n          },\n        }\n      }\n\n      return {}\n    }\n\n    setCarouselStyles.start({\n      ...getFromValue(),\n      to: {\n        [carouselSlideAxis]: -(getSlideValue() * to),\n      },\n      immediate,\n      onRest: (val: AnimationResult) => {\n        if (val.finished) {\n          setIsDragging(false)\n          setIsAnimating(false)\n          onRest()\n\n          if (!immediate) {\n            emitObservable({\n              eventName: 'onSlideChange',\n              currentItem: getCurrentActiveItem(),\n              slideActionType: getSlideActionType(),\n            })\n          }\n        }\n      },\n    })\n\n    if (enableThumbsWrapperScroll && withThumbs && !immediate) {\n      handleThumbsScroll(to)\n    }\n  }\n  function getWrapperFromValue(element: HTMLDivElement) {\n    if (element.style.transform === 'none') {\n      return 0\n    }\n\n    const values = element.style.transform.split(/\\w+\\(|\\);?/)\n    return Number(\n      values[1]\n        .split(/,\\s?/g)\n        [carouselSlideAxis === 'x' ? 0 : 1].replace('px', ''),\n    )\n  }\n  function getIsFirstItem() {\n    return getCurrentActiveItem() === 0\n  }\n  function getIsLastItem() {\n    return getCurrentActiveItem() === items.length - 1\n  }\n  function slideToPrevItem() {\n    if (\n      (!withLoop && getCurrentActiveItem() === 0) ||\n      windowIsHidden.current\n    ) {\n      return\n    }\n\n    setSlideActionType('prev')\n    if (getIsFirstItem()) {\n      slideToItem({\n        from: -(\n          Math.abs(\n            getWrapperFromValue(carouselTrackWrapperRef.current!),\n          ) +\n          getSlideValue() * items.length\n        ),\n        to: items.length - 1,\n      })\n    } else {\n      slideToItem({\n        to: getPrevItem(),\n      })\n    }\n  }\n  function slideToNextItem() {\n    if (\n      (!withLoop &&\n        getCurrentActiveItem() === internalItems.length - 1) ||\n      windowIsHidden.current\n    ) {\n      return\n    }\n\n    setSlideActionType('next')\n    if (getIsLastItem()) {\n      slideToItem({\n        from:\n          getWrapperFromValue(carouselTrackWrapperRef.current!) +\n          getSlideValue() * items.length,\n        to: 0,\n      })\n    } else {\n      slideToItem({\n        to: getNextItem(),\n      })\n    }\n  }\n  function _slideToItem(item: string | number) {\n    let itemIndex = 0\n\n    if (typeof item === 'string') {\n      itemIndex = items.findIndex(_item => _item.id === item)\n    } else {\n      itemIndex = item\n    }\n\n    if (itemIndex >= items.length) {\n      throw Error(\n        `The item you want to slide to doesn't exist. This could be due to the fact that \n        you provide a wrong id or a higher numeric index.`,\n      )\n    }\n\n    if (itemIndex === getCurrentActiveItem()) {\n      return\n    }\n\n    const currentItem = findItemIndex(\n      items[getCurrentActiveItem()].id,\n    )\n    const newActiveItem = findItemIndex(items[itemIndex].id)\n\n    if (newActiveItem > currentItem) {\n      setSlideActionType('next')\n    } else {\n      setSlideActionType('prev')\n    }\n\n    slideToItem({\n      to: itemIndex,\n    })\n  }\n  const contextProps: UseSpringCarouselContextProps = {\n    useListenToCustomEvent,\n    getIsFullscreen,\n    enterFullscreen,\n    exitFullscreen,\n    getIsAnimating,\n    getIsDragging,\n    getIsNextItem,\n    getIsPrevItem,\n    slideToPrevItem,\n    slideToNextItem,\n    slideToItem: _slideToItem,\n    getIsActiveItem: id => {\n      return findItemIndex(id) === getCurrentActiveItem()\n    },\n    getCurrentActiveItem: () => ({\n      id: items[getCurrentActiveItem()].id,\n      index: getCurrentActiveItem(),\n    }),\n  }\n  function getItemWidthValue() {\n    return `repeat(${internalItems.length}, calc(calc(100% - ${\n      gutter * (itemsPerSlide - 1)\n    }px) / ${itemsPerSlide}))`\n  }\n  function getPercentageValue() {\n    return `calc(100% - ${adjacentItemsPx * 2}px)`\n  }\n\n  const carouselFragment = (\n    <UseSpringCarouselContext.Provider value={contextProps}>\n      <div\n        ref={mainCarouselWrapperRef}\n        data-testid=\"use-spring-carousel-wrapper\"\n        style={{\n          display: 'flex',\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          overflow: 'hidden',\n        }}\n      >\n        <animated.div\n          {...bindDrag()}\n          data-testid=\"use-spring-carousel-animated-wrapper\"\n          style={{\n            display: 'grid',\n            gridGap: `${gutter}px`,\n            [carouselSlideAxis === 'x'\n              ? 'gridTemplateColumns'\n              : 'gridTemplateRows']: getItemWidthValue(),\n            top: 0,\n            left: 0,\n            width:\n              carouselSlideAxis === 'x'\n                ? getPercentageValue()\n                : '100%',\n            height:\n              carouselSlideAxis === 'y'\n                ? getPercentageValue()\n                : '100%',\n            position: 'relative',\n            ...carouselStyles,\n          }}\n          ref={ref => {\n            if (ref) {\n              carouselTrackWrapperRef.current = ref\n\n              if (withLoop) {\n                adjustCarouselWrapperPosition(ref)\n              }\n            }\n          }}\n        >\n          {internalItems.map(({ id, renderItem }, index) => {\n            return (\n              <div\n                key={`${id}-${index}`}\n                className=\"use-spring-carousel-item\"\n                data-testid=\"use-spring-carousel-item-wrapper\"\n                style={{\n                  display: 'flex',\n                  position: 'relative',\n                }}\n              >\n                {renderItem}\n              </div>\n            )\n          })}\n        </animated.div>\n      </div>\n    </UseSpringCarouselContext.Provider>\n  )\n  const thumbsFragment = (\n    <UseSpringCarouselContext.Provider value={contextProps}>\n      {_thumbsFragment}\n    </UseSpringCarouselContext.Provider>\n  )\n\n  return {\n    carouselFragment,\n    thumbsFragment,\n    ...contextProps,\n  }\n}\n","import { createContext, useRef, useState, useContext } from 'react'\nimport { useTransition, animated, config } from 'react-spring'\nimport { useDrag } from 'react-use-gesture'\nimport {\n  useCustomEventsModule,\n  useThumbsModule,\n  useFullscreenModule,\n} from './modules'\nimport {\n  UseTransitionCarouselContextProps,\n  UseTransitionCarouselProps,\n  SlideActionType,\n} from './types'\n\nconst UseTransitionCarouselContext = createContext<\n  UseTransitionCarouselContextProps | undefined\n>(undefined)\n\nexport function useTransitionCarouselContext() {\n  const context = useContext(UseTransitionCarouselContext)\n\n  if (!context) {\n    throw new Error(`useTransitionCarouselContext isn't being used within the useTransitionCarousel context; \n    use the context only inside a component that is rendered within the Carousel.`)\n  }\n\n  return context\n}\n\nexport default function useTransitionCarousel({\n  items,\n  withLoop = false,\n  withThumbs = false,\n  springConfig = config.default,\n  thumbsSlideAxis = 'x',\n  enableThumbsWrapperScroll = true,\n  draggingSlideTreshold = 50,\n  prepareThumbsData,\n  toPrevItemSpringProps,\n  toNextItemSpringProps,\n  disableGestures = false,\n  springAnimationProps = {\n    initial: {\n      opacity: 1,\n      position: 'relative',\n    },\n    from: {\n      opacity: 0,\n      position: 'absolute',\n    },\n    enter: {\n      opacity: 1,\n      position: 'relative',\n    },\n    leave: {\n      opacity: 0,\n      position: 'absolute',\n    },\n  },\n}: UseTransitionCarouselProps) {\n  const slideActionType = useRef<SlideActionType>('next')\n  const mainCarouselWrapperRef = useRef<HTMLDivElement | null>(null)\n  const isAnimating = useRef(false)\n  const [activeItem, setActiveItem] = useState(0)\n\n  const {\n    emitObservable,\n    useListenToCustomEvent,\n  } = useCustomEventsModule()\n  const {\n    enterFullscreen,\n    exitFullscreen,\n    getIsFullscreen,\n  } = useFullscreenModule({\n    emitObservable,\n    mainCarouselWrapperRef,\n  })\n  const {\n    thumbsFragment: _thumbsFragment,\n    handleThumbsScroll,\n  } = useThumbsModule({\n    items,\n    withThumbs,\n    thumbsSlideAxis,\n    springConfig,\n    prepareThumbsData,\n  })\n\n  const bindSwipe = useDrag(\n    ({ last, movement: [mx] }) => {\n      if (getIsAnimating()) {\n        return\n      }\n\n      if (last) {\n        const prevItemTreshold = mx > draggingSlideTreshold\n        const nextItemTreshold = mx < -draggingSlideTreshold\n        const isFirstItem = activeItem === 0\n        const isLastItem = activeItem === items.length - 1\n\n        if (nextItemTreshold) {\n          if (!withLoop && isLastItem) {\n            return\n          }\n\n          slideToNextItem()\n          emitObservable({\n            eventName: 'onLeftSwipe',\n          })\n        } else if (prevItemTreshold) {\n          if (!withLoop && isFirstItem) {\n            return\n          }\n\n          slideToPrevItem()\n          emitObservable({\n            eventName: 'onRightSwipe',\n          })\n        }\n      }\n    },\n    {\n      enabled: !disableGestures,\n    },\n  )\n\n  function getTransitionConfig() {\n    const slideActionType = getSlideActionType()\n\n    if (slideActionType === 'prev' && toPrevItemSpringProps) {\n      return {\n        initial: {\n          ...springAnimationProps.initial,\n        },\n        from: {\n          ...toPrevItemSpringProps.from,\n        },\n        enter: {\n          ...toPrevItemSpringProps.enter,\n        },\n        leave: {\n          ...toPrevItemSpringProps.leave,\n        },\n      }\n    }\n\n    if (slideActionType === 'next' && toNextItemSpringProps) {\n      return {\n        initial: {\n          ...springAnimationProps.initial,\n        },\n        from: {\n          ...toNextItemSpringProps.from,\n        },\n        enter: {\n          ...toNextItemSpringProps.enter,\n        },\n        leave: {\n          ...toNextItemSpringProps.leave,\n        },\n      }\n    }\n\n    return {\n      initial: {\n        ...springAnimationProps.initial,\n      },\n      from: {\n        ...springAnimationProps.from,\n      },\n      enter: {\n        ...springAnimationProps.enter,\n      },\n      leave: {\n        ...springAnimationProps.leave,\n      },\n    }\n  }\n\n  const transitions = useTransition(activeItem, {\n    config: springConfig,\n    ...getTransitionConfig(),\n    onStart: () => setIsAnimating(true),\n    keys: null,\n    onRest: val => {\n      if (val.finished) {\n        setIsAnimating(false)\n        emitObservable({\n          eventName: 'onSlideChange',\n          currentItem: activeItem,\n          slideActionType: getSlideActionType(),\n        })\n      }\n    },\n  })\n  const itemsFragment = transitions((styles, item) => (\n    <animated.div\n      style={{\n        ...styles,\n        flex: '1 0 100%',\n        width: '100%',\n        height: '100%',\n      }}\n    >\n      {items[item].renderItem}\n    </animated.div>\n  ))\n\n  function getIsAnimating() {\n    return isAnimating.current\n  }\n  function setIsAnimating(val: boolean) {\n    isAnimating.current = val\n  }\n  function setSlideActionType(type: SlideActionType) {\n    slideActionType.current = type\n  }\n  function getSlideActionType() {\n    return slideActionType.current\n  }\n  function slideToItem(item: string | number) {\n    let itemIndex = 0\n\n    if (typeof item === 'string') {\n      itemIndex = items.findIndex(_item => _item.id === item)\n    } else {\n      itemIndex = item\n    }\n\n    if (itemIndex >= items.length) {\n      throw Error(\n        `The item you want to slide to doesn't exist. This could be due to the fact that \n        you provide a wrong id or a higher numeric index.`,\n      )\n    }\n\n    if (itemIndex === activeItem) {\n      return\n    }\n\n    const currentItem = findItemIndex(items[activeItem].id)\n    const newActiveItem = findItemIndex(items[itemIndex].id)\n\n    emitObservable({\n      eventName: 'onSlideStartChange',\n      nextItem: newActiveItem,\n      slideActionType: getSlideActionType(),\n    })\n\n    if (newActiveItem > currentItem) {\n      setSlideActionType('next')\n    } else {\n      setSlideActionType('prev')\n    }\n\n    setActiveItem(itemIndex)\n\n    if (enableThumbsWrapperScroll && withThumbs) {\n      handleThumbsScroll(itemIndex)\n    }\n  }\n  function slideToNextItem() {\n    const isLastItem = activeItem === items.length - 1\n\n    if (withLoop) {\n      setSlideActionType('next')\n      if (isLastItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: 0,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(0)\n      } else {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem + 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(activeItem + 1)\n      }\n    } else {\n      if (!isLastItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem + 1,\n          slideActionType: getSlideActionType(),\n        })\n        setSlideActionType('next')\n        setActiveItem(activeItem + 1)\n      }\n    }\n  }\n  function slideToPrevItem() {\n    const isFirstItem = activeItem === 0\n\n    if (withLoop) {\n      setSlideActionType('prev')\n      if (isFirstItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: items.length - 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(items.length - 1)\n      } else {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem - 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(activeItem - 1)\n      }\n    } else {\n      if (!isFirstItem) {\n        setSlideActionType('prev')\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          nextItem: activeItem - 1,\n          slideActionType: getSlideActionType(),\n        })\n        setActiveItem(activeItem - 1)\n      }\n    }\n  }\n  function findItemIndex(id: string) {\n    return items.findIndex(item => item.id === id)\n  }\n  function getIsNextItem(id: string) {\n    const itemIndex = findItemIndex(id)\n\n    if (withLoop && activeItem === items.length - 1) {\n      return itemIndex === 0\n    }\n\n    return itemIndex === activeItem + 1\n  }\n  function getIsPrevItem(id: string) {\n    const itemIndex = findItemIndex(id)\n\n    if (withLoop && activeItem === 0) {\n      return itemIndex === items.length - 1\n    }\n\n    return itemIndex === activeItem - 1\n  }\n\n  const contextProps: UseTransitionCarouselContextProps = {\n    activeItem,\n    slideToItem,\n    slideToNextItem,\n    slideToPrevItem,\n    enterFullscreen,\n    exitFullscreen,\n    useListenToCustomEvent,\n    getIsNextItem,\n    getIsPrevItem,\n    getIsAnimating,\n    getIsFullscreen,\n    getIsActiveItem: id => {\n      return findItemIndex(id) === activeItem\n    },\n    getCurrentActiveItem: () => ({\n      id: items[activeItem].id,\n      index: activeItem,\n    }),\n  }\n\n  const carouselFragment = (\n    <UseTransitionCarouselContext.Provider value={contextProps}>\n      <div\n        ref={mainCarouselWrapperRef}\n        {...bindSwipe()}\n        style={{\n          display: 'flex',\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          overflow: 'hidden',\n        }}\n      >\n        {itemsFragment}\n      </div>\n    </UseTransitionCarouselContext.Provider>\n  )\n\n  const thumbsFragment = (\n    <UseTransitionCarouselContext.Provider value={contextProps}>\n      {_thumbsFragment}\n    </UseTransitionCarouselContext.Provider>\n  )\n\n  return {\n    carouselFragment,\n    thumbsFragment,\n    ...contextProps,\n  }\n}\n"],"names":["_jsx"],"mappings":"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"}